% !TeX encoding = UTF-8
% !TeX program = pdfLaTeX
% !TeX root = matlab-exercises-emaip.tex
% !TeX spellcheck = en_GB
\documentclass[fleqn, 12pt,a4paper]{article}
\usepackage[colorlinks, linkcolor=blue, citecolor=blue, urlcolor=blue]{hyperref}
%\usepackage[nosolutionfiles]{answers}
\usepackage{answers}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{todonotes}
\usepackage{fancyvrb}
\usepackage{xparse}
\usepackage{listings}
\usepackage{multicol}
\usepackage{tcolorbox}
\usepackage{wrapfig}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}

\lstset{language=Matlab,
   keywords={break,case,catch,continue,else,elseif,end,for,function,
      global,if,otherwise,persistent,return,switch,try,while},
   basicstyle=\footnotesize\ttfamily,
   keywordstyle=\color{blue},
   commentstyle=\color{dkgreen},
   stringstyle=\color{dkgreen},
%   numbers=left,
%   numberstyle=\tiny\color{gray},
%   stepnumber=3,
%   numbersep=10pt,
   backgroundcolor=\color{white},
   tabsize=4,
   showspaces=false,
   showstringspaces=false}

\newcommand{\moved}{\todo[inline]{The exercise above has been moved to matlab with unittests.}}


% Fix for moving the hypertarget one line up.
% https://tex.stackexchange.com/a/412381/1366
\makeatletter
 \newcommand{\linkdest}[1]{\Hy@raisedlink{\hypertarget{#1}{}}}
\makeatother

\newcounter{ex}
\numberwithin{ex}{section}

\newenvironment{ex}[1][]{%
%\filbreak
\medbreak
\refstepcounter{ex}
\noindent
\textbf{\linkdest{\theex{}exercise}{}Exercise \theex{}: #1\hfill\hyperlink{\theex{}hint}{hint}, \hyperlink{\theex{}solution}{solution}}\par\noindent}{}

\Newassociation{sol}{Solution}{ans}
\Newassociation{hint}{Hint}{hnt}


% Redefine the Hint and Solution environment.
\renewenvironment{Hint}[1]{{\filbreak\par\noindent\linkdest{#1{}hint}{}\bf Exercise \hyperlink{#1{}exercise}{#1}:}\newline}{\bigskip}
\renewenvironment{Solution}[1]{{\filbreak\par\noindent\linkdest{#1{}solution}{}\bf Exercise \hyperlink{#1{}exercise}{#1}:}\newline}{\bigskip}

\Opensolutionfile{ans}[ans]
\Opensolutionfile{hnt}[hints]

% Macros for writing solutions and unittests to files
% in the exercises subdirectory.

% The subdirectory to save exercises in.
\NewDocumentCommand{\CurrentExerciseDirectory}{}{00default}

% Command to update which directory to save files in.
\NewDocumentCommand{\SetExerciseDirectory}{m}{%
	\RenewDocumentCommand{\CurrentExerciseDirectory}{}{#1}}

% Automatically numbered files, with the filename
% structure exercise_2.2_plot.m
\NewDocumentEnvironment{solutionfile}{m}
  {\VerbatimOut{exercises/\CurrentExerciseDirectory/#1}}
  {\endVerbatimOut}
\NewDocumentEnvironment{testfile}{m}
  {\VerbatimOut{exercises/\CurrentExerciseDirectory/exercise_\theex_#1}}
  {\endVerbatimOut}


\author{Henrik Skov Midtiby}
\title{Matlab exercises for E-MAIP 2019}
\date{\today}

%\includeonly{}

\begin{document}
\maketitle

\newpage
\tableofcontents

\newpage
\section*{Introduction}

These notes are used in the course \emph{Mathematics and Introduction to programming}
that is taught on University of Southern Denmark during fall 2019.

The source for this document is available on github, 
\url{https://github.com/henrikmidtiby/matlab-notes}.


\include{settingGitUpOnWindows}
\include{matlabIntroduction}
\include{complexNumbers}
\include{matlabRefresher}
\include{fittingModelsToData}
\include{nomericalIntegration}
\include{functionsAndRecap}
\include{numericalSolutionsOfODEs}
\include{fromOldExamSets}
\include{functionsWithIfForAndWhileStructures}
\include{theMinHeapDataStructure}
\include{solveSecondOrderDiffEquationsNumerically}
\include{numericalRootFinding}


\section{Plotting}

To plot eg. the sine function in matlab, the following code
can be used:
\begin{lstlisting}
% Open figure 1
figure(1);

% Clear the content of figure one (this only have an effect 
% if figure 1 already contained previously plotted material)
clf;

% Generate a list of x values, for which the function should be 
% plotted.
x = linspace(-2, 7);

% Plot the function
plot(x, sin(x));
\end{lstlisting}

\subsection{Plotting multiple things in the same plot}

By default matlab will overwrite the content of a figure
when a new plot command is issued.
So for instance if you want to plot both the sine and the cosine 
function in the same plot, this approach would fail, as only the 
cosine function will be present in the generated plot.

\begin{lstlisting}
figure(1);
clf; 
x = linspace(-2, 7);
plot(x, sin(x));
plot(x, cos(x));
\end{lstlisting}

To plot multiple things in the same plot, matlab should be told
to keep using the same ``paper'' that the plot is drawn upon.
This is achieved by the \verb!hold on! command.
After a \verb!hold on! command is issued, matlab will not erase 
the content of a plot but will add new material to the plot.

\begin{lstlisting}
figure(1);
clf; 
x = linspace(-2, 7);
plot(x, sin(x));
hold on;
plot(x, cos(x));
\end{lstlisting}

The plot can be taken out of the \verb!hold on! state, by the 
command \verb!hold off! or by clearing the figure using the 
command \verb!clf!.


\subsection{Adding information to plots}
\label{ssecAddingInformationToPlots}

It is often beneficial to add some text to plots, 
that can describe what is visualized and what are on the 
axes. 
This can be achieved using the commands \verb!title!, 
\verb!xlabel! and \verb!ylabel! as shown here:
\begin{lstlisting}
title("Harmonic oscillations")
xlabel("Time [s]")
ylabel("Offset")
\end{lstlisting}

If you need to add mathematical expression it is possible 
for matlab to visualise latex expressions.
To do this specify that the latex interpreter is used when 
formatting text as shown here:
\begin{lstlisting}
title("Harmonic oscillations $a^b$", 'interpreter', 'latex')
xlabel("Time $t$ [s]", 'interpreter', 'latex')
ylabel("Offset $\sin(t)$", 'interpreter', 'latex')
\end{lstlisting}


\subsection{Specifying plot limits}

For some plots it is only of interest to show a specific 
part of the coordinate system.
To choose which part to include in a plot, use the 
\verb!xlim! and \verb!ylim! commands.


\subsection{Adding text annotations to a plot}

Text elements can be placed in the plot area
using the \verb!text! command.
The command requires three arguments, the location of the 
text specified as $x$ and $y$ coordinates and the 
text to insert.
It is also possible to insert mathematical expressions
using the \verb!text! command as described in 
\ref{ssecAddingInformationToPlots}.


\subsection{Multiple plots in each figure}

On information about how to add multiple
plots to a single figure, see section 
\ref{ssecMultiplePlotsInOne}.



\section{Random number generation}

Matlab is able to generate random numbers.
This can be practical in multiple situations.
The random numbers are created by a random number 
generator, which is able to generate numbers that 
(at least) appear to be random, even if a computer 
has generated them.

To simulate a six sided dice, the \verb!randi! command
can be used.
\begin{lstlisting}
>> randi(5)
ans = 3
>> randi(5)
ans = 4
\end{lstlisting}
If a matrix filled with random values are needed, the size
of the matrix can be specified to \verb!randi! as shown here:
\begin{lstlisting}
>> randi(5, 2, 4)
ans = 5     4     3     1
      1     3     1     5
\end{lstlisting}

Similarly can you get a random number from a uniform 
distribution between zero and one by using the \verb!rand! 
function.
\begin{lstlisting}
>> rand()
ans = 0.6385
>> rand()
ans = 0.0336
\end{lstlisting}
In some cases it is beneficial to be able to produce the exact
same sequence of ``random numbers'' multiple times.
This can be achieved by setting the state of the random number 
generator, which is done as follows:
\begin{lstlisting}
>> rng(1); 
>> randi(10, 1, 5)
ans = 5     8     1     4     2
\end{lstlisting}

\subsection{Using random numbers}

One case for using random numbers is to generate 
calculation exercises. 
Below is an example that generates a system of three
equations with three unknowns in the form 
$A \cdot \vec{x} = \vec{b}$.
The system of equations are generated by populating 
$A$ and $\vec{x}$ with random integers.
Then their product is calculated and finally are
$A$ and $\vec{b}$ shown to the user.
\begin{lstlisting}
n = 3;
A = randi([-3, 3], [n, n])
x = randi([-5, 5], [n, 1]);
b = A*x
\end{lstlisting}
The generated output could look like
\begin{lstlisting}
A =  3     3    -3
    -1     3    -2
     1    -3     3
b = -30
     -9
     14
\end{lstlisting}



\section{Loose ends}


\todo[inline]{Add exercises about secret sharing. Get inspiration from this video: Secret Sharing Explained Visually \url{https://www.youtube.com/watch?v=iFY5SyY3IMQ}}

\todo[inline]{Add exercise on implementing a perceptron, \url{https://www.khanacademy.org/computer-programming/perceptron-classifier/993241235}}

\todo[inline]{Matlab exercise on implementing quicksort and other sorting algorithms}

\todo[inline]{Lav en opgave om at finde modstande (og kombinationer af disse) der er tættest på en ønsket værdi}


\todo[inline]{Lav en opgave om fordeling af mandater ud fra antal afgivne stemmer vha. den Hondske metode
\href{https://da.wikipedia.org/wiki/D\%27Hondts_metode}{wikipedia}}

\todo[inline]{Lav en opgave om at lave slope plots i matlab.}

\Closesolutionfile{hnt}
\Closesolutionfile{ans}


\newpage
\section{Hints}
\input{hints}


\newpage
\section{Solutions}
\input{ans}


\newpage
\section{Links to other resources}

Beginning Matlab Exercises, by R. J. Braun: 
\url{http://www.math.udel.edu/~braun/M349/Matlab_probs2.pdf}

\url{http://kom.aau.dk/~borre/matlab7/exercise.pdf}


\end{document}
