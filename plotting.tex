% !TeX encoding = UTF-8
% !TeX program = pdfLaTeX
% !TeX root = matlab-exercises-emaip.tex
% !TeX spellcheck = en_GB
\section{Plotting}

To plot eg. the sine function in matlab, the following code
can be used:
\begin{lstlisting}
% Open figure 1
figure(1);

% Clear the content of figure one (this only have an effect 
% if figure 1 already contained previously plotted material)
clf;

% Generate a list of x values, for which the function should be 
% plotted.
x = linspace(-2, 7);

% Plot the function
plot(x, sin(x));
\end{lstlisting}

\subsection{Plotting multiple things in the same plot}

By default matlab will overwrite the content of a figure
when a new plot command is issued.
So for instance if you want to plot both the sine and the cosine 
function in the same plot, this approach would fail, as only the 
cosine function will be present in the generated plot.

\begin{lstlisting}
figure(1);
clf; 
x = linspace(-2, 7);
plot(x, sin(x));
plot(x, cos(x));
\end{lstlisting}

To plot multiple things in the same plot, matlab should be told
to keep using the same ``paper'' that the plot is drawn upon.
This is achieved by the \verb!hold on! command.
After a \verb!hold on! command is issued, matlab will not erase 
the content of a plot but will add new material to the plot.

\begin{lstlisting}
figure(1);
clf; 
x = linspace(-2, 7);
plot(x, sin(x));
hold on;
plot(x, cos(x));
\end{lstlisting}

The plot can be taken out of the \verb!hold on! state, by the 
command \verb!hold off! or by clearing the figure using the 
command \verb!clf!.


\subsection{Adding information to plots}
\label{ssecAddingInformationToPlots}

It is often beneficial to add some text to plots, 
that can describe what is visualized and what are on the 
axes. 
This can be achieved using the commands \verb!title!, 
\verb!xlabel! and \verb!ylabel! as shown here:
\begin{lstlisting}
title("Harmonic oscillations")
xlabel("Time [s]")
ylabel("Offset")
\end{lstlisting}

If you need to add mathematical expression it is possible 
for matlab to visualise latex expressions.
To do this specify that the latex interpreter is used when 
formatting text as shown here:
\begin{lstlisting}
title("Harmonic oscillations $a^b$", 'interpreter', 'latex')
xlabel("Time $t$ [s]", 'interpreter', 'latex')
ylabel("Offset $\sin(t)$", 'interpreter', 'latex')
\end{lstlisting}


\subsection{Specifying plot limits}

For some plots it is only of interest to show a specific 
part of the coordinate system.
To choose which part to include in a plot, use the 
\verb!xlim! and \verb!ylim! commands.


\subsection{Adding text annotations to a plot}

Text elements can be placed in the plot area
using the \verb!text! command.
The command requires three arguments, the location of the 
text specified as $x$ and $y$ coordinates and the 
text to insert.
It is also possible to insert mathematical expressions
using the \verb!text! command as described in 
\ref{ssecAddingInformationToPlots}.


\subsection{Multiple plots in each figure}

On information about how to add multiple
plots to a single figure, see section 
\ref{ssecMultiplePlotsInOne}.


\subsection{Exporting a plot to an image}

When a plot has been generated in matlab, 
it is often practical to export the plot as an image.
This makes it possible to include the plot in a 
report or similar document.
To export the current plot as a png image, the command
\verb!print! can be used as follows:
\begin{lstlisting}
print('subplot_example_1.png', '-dpng', '-r300');
\end{lstlisting}
In the example the print command takes a filename as input 
as well two options specifying the fileformat (png) 
and resolution of the exported image.


 