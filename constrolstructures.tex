% !TeX encoding = UTF-8
% !TeX program = pdfLaTeX
% !TeX root = matlab-exercises-emaip.tex
% !TeX spellcheck = en_GB
\section{Control structures}

\subsection{If statements}

\todo[inline]{Use this as inspiration for introducing if statements \url{https://www.learnbyexample.org/python-if-else-elif-statement/}Â¨}

\todo[inline]{Experiment with decision tables for specifying branching behaviour \url{https://www.hillelwayne.com/decision-tables/}}




\subsection{For loops}

Consider the task of adding all integers from 1 to 9
and storing the result in the variable \verb!val!;  
this can be achieved with the following code 
\begin{lstlisting}
val = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9
\end{lstlisting}
This is straightforward to write, but does not scale
as well as possible.
Adding all integers from 1 to 100 with a similar method
is still possible although impractical.
The task of adding all integers from 1 to 1000000 
is impractical, so lets look at better ways of doing such 
calculations.

The first step to make the code easier to write, does the
direct opposite thing; it makes the code much longer, but it 
also gives it a more repeating structure, which soon will be 
exploited 
\begin{lstlisting}
val = 0;
val = val + 1;
val = val + 2;
val = val + 3;
val = val + 4;
val = val + 5;
val = val + 6;
val = val + 7;
val = val + 8;
val = val + 9;
val
\end{lstlisting}
It still bothers me that the line where \verb!val! is updated
changes from line to line.
To avoid this a helper variable $k$ is introduced.
Before each update of \verb!val! the value of $k$ is 
increased by one and then the update rule can be used.
\begin{lstlisting}
val = 0;
k = 1;
val = val + k;
k = 2;
val = val + k;
k = 3;
val = val + k;
k = 4;
val = val + k;
k = 5;
val = val + k;
k = 6;
val = val + k;
k = 7;
val = val + k;
k = 8;
val = val + k;
k = 9;
val = val + k;
val
\end{lstlisting}
To tell matlab to repeat the update rule \verb!val = val + k! for
all values of $k$ from 1 to 9, the following code can be used:
\begin{lstlisting}
val = 0;
for k = 1:9
    val = val + k;
end
val
\end{lstlisting}
Compared with the first approach of manually typing
all the integers in the range 1 to 9, it takes a bit more space, 
but the code has become much easier to adapt to other problems.


\begin{ex}\label{exSumIntegersUp100}%
Determine the value of 
\begin{align*}
\sum_{k = 1}^{100} k = 1 + 2 + 3 + \ldots + 98 + 99 + 100
\end{align*}
In other words calculate the sum of all integers from 1 to 100.
\begin{hint}
A for loop will be a good structure to use.
The answer is 5050.
\end{hint}
\begin{sol}
A solution is:
\begin{lstlisting}
val = 0;
for k = 1:100
    val = val + k;
end
val
\end{lstlisting}
\end{sol}
\end{ex}

\begin{ex}
Determine the value of 
\begin{align*}
\sum_{k = 1}^{100} \sin(k) = \sin(1) + \sin(2) + \ldots + \sin(99) + \sin(100)
\end{align*}
\begin{hint}
A for loop will be a good structure to use.
The answer is -0.1272.
\end{hint}
\begin{sol}
A solution is:
\begin{lstlisting}
val = 0;
for k = 1:100
    val = val + sin(k);
end
val
\end{lstlisting}
\end{sol}
\end{ex}


\begin{ex}
Test the following expression by selecting a positive integer $n$
and evaluate both sides of the expression using the selected value.
\begin{align*}
\sum_{i = 1}^n i = \frac{n \cdot (n + 1)}{2}
\end{align*}
Repeat this with three different value of $n$.
\begin{hint}
Look at the code from exercise \ref{exSumIntegersUp100}.
It can be adapted to evaluate the left hand side of the expression.
\end{hint}
\begin{sol}
A solution is:
\begin{lstlisting}
n = 234;
val_left = 0;
for k = 1:n
    val_left = val_left + k;
end
val_left
val_right = n * (n + 1) / 2
\end{lstlisting}
\end{sol}
\end{ex}


\begin{ex}
Test the following expression by selecting a positive value $a$
which is not one and an integer $n$
and evaluate both sides of the expression using the selected value.
\begin{align*}
\sum_{i = 0}^n a^i = \frac{1 - a^{n + 1}}{1 - a}
\end{align*}
Repeat this with three different value of $n$.
\begin{hint}
Look at the code from exercise \ref{exSumIntegersUp100}.
It can be adapted to evaluate the left hand side of the expression.
\end{hint}
\begin{sol}
A solution is:
\begin{lstlisting}
a = 1.2;
n = 43;
val_left = 0;
for k = 0:n
    val_left = val_left + a^k;
end
val_left
val_right = (1 - a^(n + 1)) / (1 - a)
\end{lstlisting}
\end{sol}
\end{ex}
